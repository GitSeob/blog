{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect } from 'react';\nimport { MainContainer } from '@styles/mainPage';\nimport HeadCategories from '@containers/main/HeadCategories';\nimport PostCards from '@containers/main/PostCards';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { LOAD_POSTS_REQUEST } from '@reducers/posts';\nimport Error from './_error';\n\nvar Index = function Index(_ref) {\n  var category = _ref.category;\n\n  var _useSelector = useSelector(function (state) {\n    return state.posts;\n  }),\n      posts = _useSelector.posts,\n      Category = _useSelector.Category,\n      isLoaddingPosts = _useSelector.isLoaddingPosts,\n      EndOfPosts = _useSelector.EndOfPosts,\n      numberOfPosts = _useSelector.numberOfPosts,\n      loadPostsErrorReason = _useSelector.loadPostsErrorReason;\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    var onScroll = function onScroll() {\n      if (window.scrollY + document.documentElement.clientHeight > document.documentElement.scrollHeight - 10) {\n        if (!(loadPostsErrorReason || isLoaddingPosts || EndOfPosts)) {\n          var _posts;\n\n          dispatch({\n            type: LOAD_POSTS_REQUEST,\n            payload: {\n              category: category,\n              lastId: (_posts = posts[posts.length - 1]) === null || _posts === void 0 ? void 0 : _posts.id\n            }\n          });\n        }\n      }\n    };\n\n    window.addEventListener('scroll', onScroll);\n    return function () {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [posts]);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: loadPostsErrorReason ? /*#__PURE__*/_jsx(Error, {\n      statusCode: 503,\n      message: \"\\uC11C\\uBC84\\uAC00 \\uC751\\uB2F5\\uD558\\uC9C0 \\uC54A\\uC544\\uC694...\"\n    }) : /*#__PURE__*/_jsxs(MainContainer, {\n      children: [/*#__PURE__*/_jsx(HeadCategories, {\n        category: category,\n        Category: Category,\n        pageRoot: \"\",\n        postNum: numberOfPosts\n      }), /*#__PURE__*/_jsx(PostCards, {\n        posts: posts\n      })]\n    })\n  });\n};\n\nexport var __N_SSP = true;\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}