(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[7],{QivM:function(t,n,e){"use strict";var r=e("q1tI");n.a=function(t){var n=Object(r.useState)(t),e=n[0],i=n[1];return[e,Object(r.useCallback)((function(t){i(t.target.value)}),[]),i]}},Ubfa:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var r=e("dVzv");function i(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],r=!0,i=!1,a=void 0;try{for(var c,o=t[Symbol.iterator]();!(r=(c=o.next()).done)&&(e.push(c.value),!n||e.length!==n);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return e}}(t,n)||Object(r.a)(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Y1zR:function(t,n,e){"use strict";e.r(n),e.d(n,"__N_SSP",(function(){return W})),e.d(n,"PostingContainer",(function(){return X}));var r=e("iSH3"),i=e("nKUr"),a=e("F9ys"),c=e.n(a),o=e("vRjq"),s=e("Ubfa"),u=e("q1tI"),d=e.n(u),l=e("vOnD");function b(){var t=Object(r.a)(["\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tbottom: 2rem;\n\tright: 2rem;\n\tfont-size: 12px;\n\n\t& > div {\n\t\tpadding: 0.5rem 1rem;\n\t\tborder-radius: 5px;\n\t\tbackground: #ededed;\n\t\tcolor: #707070;\n\t\tcursor: pointer;\n\t\tmargin-left: 10px;\n\n\t\t&.submit {\n\t\t\tcolor: #fff;\n\t\t\tbackground: rgba(95, 58, 154, 0.63);\n\t\t}\n\t}\n"]);return b=function(){return t},t}function f(){var t=Object(r.a)(["\n\tposition: relative;\n\tbackground: #fff;\n\tbox-shadow: 0 0 6px 1px rgba(0, 0, 0, 0.16);\n\tpadding: 2rem;\n\n\t& > textarea {\n\t\tmargin-top: 10px;\n\t\twidth: 100%;\n\t\theight: calc(100% - 10rem);\n\t}\n\n\t& > input {\n\t\twidth: 100%;\n\t\tcolor: #707070;\n\t\tfont-size: 2.5rem;\n\t\tfont-weight: 700;\n\t\tmargin-bottom: 1rem;\n\n\t\t&:focus {\n\t\t\tcolor: #212529;\n\t\t}\n\t}\n"]);return f=function(){return t},t}var p=l.b.div(f()),j=l.b.div(b()),g=e("mlEx");var h=e("dVzv");function m(t){return function(t){if(Array.isArray(t))return Object(g.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(h.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=e("QivM");function x(){var t=Object(r.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-flow: row wrap;\n\n\t& > input,\n\t& > div {\n\t\tmargin: 0 10px 10px 0;\n\t\tpadding: 0.5rem 1rem;\n\t\tbackground: #ededed;\n\t\tcolor: #707070;\n\t\tborder-radius: 5px;\n\t\tfont-size: 12px;\n\t\tline-height: 1.2;\n\t}\n\n\t& > input:focus {\n\t\tcolor: #212529;\n\t}\n"]);return x=function(){return t},t}var O=l.b.form(x()),y=function(t){var n=t.categories,e=t.setCategories,r=Object(v.a)(""),a=Object(s.a)(r,3),c=a[0],o=a[1],u=a[2];return Object(i.jsxs)(O,{children:[n.map((function(t,n){return Object(i.jsx)("div",{children:t.name},n)})),Object(i.jsx)("input",{value:c,onChange:o,onKeyPress:function(t){var r;"Enter"===t.key&&(t.preventDefault(),(r=c).length<2||"undefined"===r||n.find((function(t){return t.name===c}))||(e([].concat(m(n),[{name:c}])),u("")))},onKeyDown:function(t){"Backspace"==t.key&&0===c.length&&(t.preventDefault(),u(n[n.length-1].name),e(n.slice(0,n.length-1)))},type:"text",placeholder:"\uce74\ud14c\uace0\ub9ac\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"})]})},w=e("/MKj"),k=e("AkTQ");function C(){var t=Object(r.a)(["\n\tpadding: 0.25rem 0.5rem !important;\n"]);return C=function(){return t},t}var I=l.b.div(C()),E=function(t){var n=t.onUploadImage,e=Object(u.useRef)(),r=Object(u.useCallback)((function(){e.current.click()}),[]),a=Object(u.useCallback)((function(t){n(t.target.files[0])}),[]);return Object(i.jsxs)(I,{onClick:r,children:[Object(i.jsx)("img",{src:"/image.svg"}),Object(i.jsx)("input",{type:"file",accept:".gif, .jpg, .png",ref:e,onChange:a,style:{width:0,height:0}})]})},S=function(t){var n=t.category,e=void 0===n?[]:n,r=t.isEditingId,a=void 0===r?0:r,c=t.title,o=t.onChangeTitle,l=t.body,b=t.onChangeBody,f=t.uploadImage,g=Object(w.b)(),h=d.a.useState(e),m=Object(s.a)(h,2),v=m[0],x=m[1],O=Object(u.useCallback)((function(t,n,e,r){t&&e?g({type:k.b,payload:{isEditingId:n,body:e,categories:r}}):alert("\ud3ec\uc2a4\ud2b8 \uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc154\uc57c\ud569\ub2c8\ub2e4.")}),[]);return Object(i.jsxs)(p,{children:[Object(i.jsx)("input",{type:"text",value:c,onChange:o,placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),Object(i.jsx)(y,{categories:v,setCategories:x}),Object(i.jsx)("textarea",{value:l,onChange:b,name:"body",placeholder:"\uc774\uacf3\uc5d0 \uae00\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694."}),Object(i.jsxs)(j,{children:[Object(i.jsx)(E,{onUploadImage:f}),Object(i.jsx)("div",{className:"submit",onClick:function(){O(c,a,l,v)},children:"\uc81c\ucd9c\ud558\uae30"})]})]})};function T(){var t=Object(r.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tmargin-top: 1.5rem;\n\n\t& > div {\n\t\twidth: 100%;\n\t\tpadding: 0.7rem 1rem;\n\t\tbackground: #fff;\n\t\tborder-radius: 5px;\n\t\ttext-align: center;\n\t\tcursor: pointer;\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #707070;\n\t\tborder: 2px solid #ededed;\n\t\tmargin-left: 10px;\n\n\t\t&.selected {\n\t\t\tborder: 2px solid rgba(95, 58, 154, 0.63);\n\t\t\tcolor: rgba(95, 58, 154, 0.8);\n\t\t}\n\n\t\t&.submit {\n\t\t\tcolor: #fff;\n\t\t\tborder: 2px solid rgba(95, 58, 154, 0.63);\n\t\t\tbackground: rgba(95, 58, 154, 0.8);\n\t\t}\n\n\t\t&:nth-child(1) {\n\t\t\tmargin-left: 0;\n\t\t}\n\t}\n"]);return T=function(){return t},t}function z(){var t=Object(r.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tposition: absolute;\n\tbottom: 0;\n\tright: 0;\n\tbackground: #fafafa;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: 0.5s;\n\toverflow: hidden;\n\n\t& > div {\n\t\twidth: 400px;\n\t\tpadding: 1rem;\n\n\t\th3 {\n\t\t\tmargin: 1rem 0 0.5rem 0;\n\n\t\t\tspan {\n\t\t\t\tfont-size: 10px;\n\t\t\t\tcolor: #707070;\n\t\t\t\tfont-weight: 400;\n\t\t\t}\n\n\t\t\t&:nth-child(1) {\n\t\t\t\tmargin-top: 0;\n\t\t\t}\n\t\t}\n\t\t& > textarea {\n\t\t\tfont-size: 12px;\n\t\t\tcolor: #495057;\n\t\t\twidth: 100%;\n\t\t\tbackground: #fff;\n\t\t\tpadding: 1rem;\n\t\t\tline-height: 1.6;\n\t\t\tword-break: break-all;\n\t\t}\n\t}\n"]);return z=function(){return t},t}var D=l.b.div(z()),A=l.b.div(T()),B=e("DlQD"),N=e.n(B),_=e("vPmt");function P(){var t=Object(r.a)(["\n\twidth: 100%;\n\tbackground: #ededed;\n\tposition: relative;\n\toverflow: hidden;\n\n\t& > div.imageBox {\n\t\tmin-width: 100%;\n\t\tdisplay: flex;\n\t\theight: 100%;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\ttransition: 0.3s;\n\n\t\timg {\n\t\t\twidth: 100%;\n\t\t\tdisplay: block;\n\t\t\tobject-fit: cover;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t}\n\n\t& > div.paddingBox {\n\t\theight: 0;\n\t\twidth: 100%;\n\t\tpadding-top: 70%;\n\t}\n\n\t& > div.buttonBox {\n\t\tz-index: 2;\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\tdisplay: flex;\n\n\t\t& > div {\n\t\t\tpadding: 0.7rem 1rem;\n\t\t\tbackground: #fff;\n\t\t\tborder-radius: 5px;\n\t\t\ttext-align: center;\n\t\t\tcursor: pointer;\n\t\t\tfont-weight: 600;\n\t\t\tcolor: #707070;\n\n\t\t\t&:nth-child(1) {\n\t\t\t\tcolor: rgba(95, 58, 154, 0.8);\n\t\t\t\tmargin-right: 10px;\n\t\t\t}\n\t\t}\n\t}\n\n\tbutton {\n\t\tcursor: pointer;\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tz-index: 2;\n\t\tbackground: none;\n\n\t\t&.left {\n\t\t\tleft: 0;\n\t\t\ttransform: translateY(-50%) rotate(180deg);\n\t\t}\n\t\t&.right {\n\t\t\tright: 0;\n\t\t}\n\t}\n"]);return P=function(){return t},t}var F=l.b.div(P()),R=e("vDqi"),U=e.n(R),M=function(t){var n=t.thumbnails,e=t.tnIndex,r=t.removeThumbnail,a=t.setTnIndex,s=t.addThumbnail,d=Object(u.useRef)(),l=Object(u.useCallback)((function(){d.current.click()}),[]),b=Object(u.useCallback)(function(){var t=Object(o.a)(c.a.mark((function t(n){var e,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.target.files[0]){t.next=3;break}return t.abrupt("return");case 3:if(!(e.size>10485760)){t.next=5;break}return t.abrupt("return");case 5:if(/^image\/(.*?)/.test(e.type)){t.next=8;break}return t.abrupt("return");case 8:return r=new FormData,t.next=11,r.append("image",e);case 11:return t.next=13,U.a.post("/post/uploadImage",r).then((function(t){s(t.data)}));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),[]);return Object(i.jsxs)(F,{children:[Object(i.jsx)("div",{className:"paddingBox"}),Object(i.jsxs)("div",{className:"buttonBox",children:[Object(i.jsxs)("div",{onClick:l,children:[Object(i.jsx)("input",{type:"file",accept:".gif, .jpg, .png",ref:d,onChange:b,style:{display:"none"}}),"\ud30c\uc77c\ucc3e\uae30"]}),n.length>0&&Object(i.jsx)("div",{onClick:r,children:"\uc81c\uac70\ud558\uae30"})]}),Object(i.jsx)("div",{className:"imageBox",style:{transform:"translateX(-".concat(100*e,"%)")},children:n&&n.map((function(t,n){return Object(i.jsx)("img",{src:t},n)}))}),e>0&&Object(i.jsx)("button",{className:"left",onClick:function(){a(e-1)},children:Object(i.jsx)("img",{src:"/arrow.svg",alt:""})}),e<n.length-1&&Object(i.jsx)("button",{className:"right",onClick:function(){a(e+1)},children:Object(i.jsx)("img",{src:"/arrow.svg",alt:""})})]})},Q=function(t){var n=t.title,e=t.post,r=Object(w.c)((function(t){return t.posting})),a=r.body,c=r.isOpen,o=r.categories,s=r.isEditingId,d=Object(w.b)(),l=Object(u.useState)(e?e.description:""),b=l[0],f=l[1],p=Object(u.useState)(!e||e.is_visible),j=p[0],g=p[1],h=Object(u.useState)(null!==e&&void 0!==e&&e.thumbnail?[e.thumbnail]:[]),v=h[0],x=h[1],O=Object(u.useState)(0),y=O[0],C=O[1],I=Object(u.useCallback)((function(t){t.preventDefault(),t.target.value.length>160||f(t.target.value.replace("\n",""))}),[]),E=Object(u.useCallback)((function(){x(v.filter((function(t,n){return n!==y}))),C(y>0?y-1:0)}),[y,v]),S=Object(u.useCallback)((function(t){x([t].concat(m(v))),C(0)}),[o]),T=Object(u.useCallback)((function(){a&&n&&b?d({type:_.b,payload:{isEditingId:s,post:{title:n,description:b,thumbnail:v[y],is_visible:j,body:a},category:o}}):alert("description\uc740 \ud544\uc218 \uc785\ub825 \ud56d\ubaa9\uc785\ub2c8\ub2e4.")}),[a,b,j,v,y]);return Object(u.useEffect)((function(){var t;if(c&&a){var n=N()(a).match(/<\s*p[^>]*>([^<]*)<\s*\/\s*p\s*>/g),e=null===n||void 0===n?void 0:n.join(" ").replace(/(<([^>]+)>)/gi,"");e&&f(e.length?e.slice(0,160):e);var r=null===(t=a.match(/!\[[^\]]*?\]\([^)]+\)/g))||void 0===t?void 0:t.map((function(t){return t.replace(/!\[[^\]]*?\]\(/g,"").replace(")","")}));x(r?[].concat(m(v),m(r)):v)}}),[c]),Object(i.jsx)(D,{style:{left:c?0:"100%"},children:Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"\uc378\ub124\uc77c \ubbf8\ub9ac\ubcf4\uae30"}),Object(i.jsx)(M,{thumbnails:v,tnIndex:y,removeThumbnail:E,setTnIndex:C,addThumbnail:S}),Object(i.jsxs)("h3",{children:["Description \ubbf8\ub9ac\ubcf4\uae30 ",Object(i.jsxs)("span",{children:[b.length,"/160"]})]}),Object(i.jsx)("textarea",{rows:4,value:b,onChange:I}),Object(i.jsxs)(A,{children:[Object(i.jsx)("div",{onClick:function(){d({type:k.a})},children:"\ucde8\uc18c\ud558\uae30"}),Object(i.jsx)("div",{className:j?"selected":"",onClick:function(){g(!j)},children:j?"\uacf5\uac1c":"\ube44\uacf5\uac1c"}),Object(i.jsx)("div",{className:"submit",onClick:T,children:"\uc791\uc131\ud558\uae30"})]})]})})},q=e("7Q4T"),K=e("w1BI"),V=function(t){var n=t.onPasteImage;return Object(u.useEffect)((function(){var t=function(t){var e=(t.clipboardData||t.originalEvent.clipboardData).items;if(0!==e.length){var r=m(e).filter((function(t){return"file"===t.kind}))[0];if(r&&r.getAsFile){var i=r.getAsFile();n(i),t.preventDefault()}}};return document&&document.body&&document.body.addEventListener("paste",t),function(){document&&document.body&&document.body.removeEventListener("paste",t)}}),[]),Object(i.jsx)("div",{style:{width:0,height:0}})},Y=e("pMEM"),J=e.n(Y),L=e("Btfs");function H(){var t=Object(r.a)(["\n\twidth: 100%;\n\tmax-width: 1320px;\n\tpadding: 40px 20px;\n\tdisplay: flex;\n\n\t& > div {\n\t\twidth: 50%;\n\t\theight: calc(100vh - 120px);\n\t}\n\n\t@media screen and (max-width: 1000px) {\n\t\t& > div {\n\t\t\twidth: 100%;\n\n\t\t\t&:nth-child(2) {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t}\n\n\t@media screen and (max-width: 700px) {\n\t\tpadding: 0;\n\t\theight: calc(100vh - 40px);\n\n\t\t& > div {\n\t\t\theight: 100%;\n\t\t\tbox-shadow: none;\n\t\t}\n\t}\n"]);return H=function(){return t},t}var W=!0,X=(n.default=function(t){var n=t.post,e=void 0===n?null:n,r=Object(w.c)((function(t){return t.user})).user,a=Object(w.c)((function(t){return t.post})).writeSuccess,l=Object(w.c)((function(t){return t.loading})),b=Object(K.useRouter)(),f=Object(v.a)(e?e.title:""),p=Object(s.a)(f,2),j=p[0],g=p[1],h=Object(v.a)(e?e.body:""),m=Object(s.a)(h,3),x=m[0],O=m[1],y=m[2],k=Object(u.useState)(""),C=k[0],I=k[1],E=function(){var t=Object(o.a)(c.a.mark((function t(n){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(!(n.size>10485760)){t.next=4;break}return t.abrupt("return");case 4:if(/^image\/(.*?)/.test(n.type)){t.next=7;break}return t.abrupt("return");case 7:return e=new FormData,t.next=10,e.append("image",n);case 10:return t.next=12,U.a.post("/post/uploadImage",e).then((function(t){I("![](".concat(t.data,")"))}));case 12:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return Object(u.useEffect)((function(){r||b.back(),a>-1&&b.push("/post/".concat(a))}),[a]),Object(u.useEffect)((function(){return C&&-1===x.indexOf(C)&&y(x+C),function(){I("")}}),[x,C]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(J.a,{children:Object(i.jsx)("title",{children:e?"\uae00 \uc218\uc815":"\uc0c8 \uae00"})}),l.WRITE_POST_REQUEST&&Object(i.jsx)(L.a,{}),Object(i.jsxs)(X,{children:[Object(i.jsxs)(d.a.Fragment,{children:[Object(i.jsx)(S,{isEditingId:e?e.id:0,category:null===e||void 0===e?void 0:e.categoryPosts,title:j,onChangeTitle:g,body:x,onChangeBody:O,uploadImage:E}),Object(i.jsx)(V,{onPasteImage:function(t){t&&E(t)}})]}),Object(i.jsx)(q.a,{className:"preview",title:j,body:x})]}),Object(i.jsx)(Q,{title:j,post:e})]})},l.b.div(H()))},dVzv:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var r=e("mlEx");function i(t,n){if(t){if("string"===typeof t)return Object(r.a)(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(r.a)(t,n):void 0}}},mlEx:function(t,n,e){"use strict";function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}e.d(n,"a",(function(){return r}))},w1BI:function(t,n,e){t.exports=e("pIS+")}}]);